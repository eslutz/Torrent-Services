# =============================================================================
# SYSTEM CONFIGURATION
# =============================================================================

# User/Group IDs (run 'id' command to find yours)
PUID="1000"
PGID="1000"

# Timezone (https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)
# Examples: America/Los_Angeles, Europe/London, Asia/Tokyo
TZ="America/New_York"

# Torrent Media Directory (mounted to /media in torrent service containers)
TORRENT_MEDIA_DIR="./media"

# DVD Rips Media Directory (mounted to /dvd-rips in *arr/tdarr containers)
DVD_MEDIA_DIR="./dvd-rips"

# Pass host project directory for correct volume mounting in dind
HOST_PROJECT_DIR=""

SERVICE_USER="admin"

# =============================================================================
# SERVICE PORTS
# =============================================================================
# All service web UI and API ports in one location for easy management

# Gluetun VPN & qBittorrent (share network stack)
QBITTORRENT_PORT="8080"

# *arr Services
PROWLARR_PORT="9696"
SONARR_PORT="8989"
RADARR_PORT="7878"
BAZARR_PORT="6767"

# Media Management
TDARR_WEBUI_PORT="8265"
TDARR_SERVER_PORT="8266"
TDARR_NODE_PORT="8267"
JELLYSEERR_PORT="5055"

# Utilities
UNPACKARR_PORT="9092"
FORWARDARR_PORT="9090"
TORARR_PORT="9091"

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# Email configuration for notifications
EMAIL_TO="email@youremail.com"
SMTP_HOST="smtp.mail.me.com"
SMTP_PORT="587"
SMTP_USER="your_email@icloud.com"
SMTP_PASSWORD="your_app_specific_password"
SMTP_FROM="your_email@me.com"

# -----------------------------------------------------------------------------
# NOTIFICATION RATE LIMITING
# -----------------------------------------------------------------------------
# Prevent email spam during cascading failures
# NOTIFICATION_COOLDOWN: Minimum seconds between duplicate notifications (default: 300 = 5 min)
# EVENT_BATCH_WINDOW: Seconds to batch similar events before sending summary (default: 30)

NOTIFICATION_COOLDOWN="300"
EVENT_BATCH_WINDOW="30"

# =============================================================================
# GLUETUN CONFIGURATION
# =============================================================================
# Documentation: https://github.com/qdm12/gluetun-wiki/tree/main

# -----------------------------------------------------------------------------
# OPENVPN CREDENTIALS
# -----------------------------------------------------------------------------
# For port forwarding support, append +pmp to your OpenVPN username
# https://protonvpn.com/support/port-forwarding-manual-setup#openvpn

OPENVPN_USER="your_openvpn_username+pmp"
OPENVPN_PASSWORD="your_openvpn_password"

# -----------------------------------------------------------------------------
# WIREGUARD CREDENTIALS
# -----------------------------------------------------------------------------

# Setup: Log in to ProtonVPN → Account → WireGuard configuration
# Generate config for a P2P server (required for port forwarding)
# Extract PrivateKey and Address from the [Interface] section
WIREGUARD_PRIVATE_KEY="your_private_key_here"
WIREGUARD_ADDRESSES="10.x.x.x/32"

# -----------------------------------------------------------------------------
# SERVER SELECTION (OPTIONAL)
# -----------------------------------------------------------------------------
# Documentation: https://github.com/qdm12/gluetun-wiki/blob/main/setup/providers/protonvpn.md

# Server filters (comma-separated, choose one or combine):
# SERVER_COUNTRIES=""          # e.g. Netherlands, United States
# SERVER_REGIONS=""            # e.g. New York
# SERVER_CITIES=""             # e.g. Ashburn
# SERVER_HOSTNAMES=""          # e.g. node-us-219.protonvpn.net (fragile if server removed)
# FREE_ONLY="on"              # Filter free tier only (no port forwarding)
# STREAM_ONLY="on"            # Filter streaming servers only
# SECURE_CORE_ONLY="on"       # Filter secure core servers only
# TOR_ONLY="on"               # Filter TOR servers only
# PORT_FORWARD_ONLY="on"      # Filter port-forwarding (P2P) servers only

# Port forwarding filter and control
# PORT_FORWARD_ONLY="on"      # Filter to P2P servers only ("on" or "off")
# VPN_PORT_FORWARDING="on"    # Enable port forwarding on VPN server

# -----------------------------------------------------------------------------
# DNS SETTINGS
# -----------------------------------------------------------------------------
# Documentation: https://github.com/qdm12/gluetun-wiki/blob/main/setup/options/dns.md

# DNS upstream resolvers (comma-separated for privacy fragmentation)
# Options: cloudflare, google, quad9, quad9 secured, quad9 unsecured, cira, opendns, etc.
# Default: cloudflare (already privacy-optimized with DNS-over-TLS)
# DNS_UPSTREAM_RESOLVERS="cloudflare,google"  # Multiple resolvers for extra privacy

# Content blocking (uses DNS-level blocking)
# BLOCK_MALICIOUS="on"       # Block malicious domains/IPs (default: on)
# BLOCK_ADS="off"            # Block advertising domains/IPs (default: off)
# BLOCK_SURVEILLANCE="off"   # Block surveillance domains/IPs (default: off)

# -----------------------------------------------------------------------------
# SERVER UPDATER
# -----------------------------------------------------------------------------
# Documentation: https://github.com/qdm12/gluetun-wiki/blob/main/setup/options/updater.md

# Update period (0 to disable, or duration like 24h, 7d)
# Refreshes VPN server list to get new servers and updated metadata
# UPDATER_PERIOD="0"          # Default: disabled

# Minimum ratio of servers required for update to succeed (0-1)
# UPDATER_MIN_RATIO="0.8"     # Default: 0.8

# ProtonVPN credentials for updating paid server list
# Required for paid servers. Create throwaway free account if you only use free servers.
# UPDATER_PROTONVPN_EMAIL="your-protonvpn-email@example.com"
# UPDATER_PROTONVPN_PASSWORD="your-protonvpn-password"

# VPN providers list override for updater (optional)
UPDATER_VPN_SERVICE_PROVIDERS=""

# -----------------------------------------------------------------------------
# CONTROL SERVER AUTHENTICATION
# -----------------------------------------------------------------------------
# API key to protect the control server endpoints from unauthorized access.
# Generate a random key with: docker run --rm qmcgaw/gluetun genkey
CONTROL_APIKEY="user_generated_api_key"

# =============================================================================
# TORRENT CLIENT (qbittorrent)
# =============================================================================

# qBittorrent Web UI Credentials
QBITTORRENT_PASSWORD="your_qbittorrent_password"

# =============================================================================
# FORWARDARR
# =============================================================================

# SYNC INTERVAL
# Defines fallback polling cadence when file events are missed
# - Set to 0 to disable polling (Default: 60 seconds)
# FORWARDARR_SYNC_INTERVAL="60"

# LOG LEVEL
# - Options: debug, info, warn, error (Default: info)
# FORWARDARR_LOG_LEVEL="info"

# =============================================================================
# PROWLARR
# =============================================================================

# API Key
PROWLARR_API_KEY=""

# Web UI Password (set during first-time auth setup)
PROWLARR_PASSWORD="your_prowlarr_password"

# -----------------------------------------------------------------------------
# Indexer Configuration
# -----------------------------------------------------------------------------

IPTORRENTS_COOKIE=""
IPTORRENTS_COOKIE_USER_AGENT=""

# =============================================================================
# SONARR
# =============================================================================

# API Key
SONARR_API_KEY=""

# Web UI Password (set during first-time auth setup)
SONARR_PASSWORD="your_sonarr_password"

# =============================================================================
# RADARR
# =============================================================================

# API Key
RADARR_API_KEY=""

# Web UI Password (set during first-time auth setup)
RADARR_PASSWORD="your_radarr_password"

# =============================================================================
# BAZARR
# =============================================================================

# API Key
BAZARR_API_KEY=""

# Web UI Password (set during first-time auth setup)
BAZARR_PASSWORD="your_bazarr_password"

# -----------------------------------------------------------------------------
# Subtitle Providers
# -----------------------------------------------------------------------------

# OpenSubtitles.com
OPENSUBTITLESCOM_PASS=""

# Addic7ed
ADDIC7ED_PASS=""
ADDIC7ED_COOKIES=""
ADDIC7ED_USER_AGENT=""

# =============================================================================
# UNPACKARR
# =============================================================================
# Documentation: https://github.com/eslutz/Unpackarr

UNPACKARR_LOG_LEVEL="INFO"
UNPACKARR_PARALLEL="1"
UNPACKARR_DELETE_ORIG="true"
UNPACKARR_POLL_INTERVAL="2m"


# =============================================================================
# TDARR
# =============================================================================

# -----------------------------------------------------------------------------
# Transcode Output Settings
# -----------------------------------------------------------------------------
# Configure via Tdarr web UI:
# - Output codec: H.265 (HEVC) recommended for space savings
# - Output container: .m4v (MP4) for broad compatibility
# - Audio: Keep English only, drop other languages
# - Subtitles: Keep English only, drop other languages
# - In-place transcoding: Enable to replace original files
# - Wait for completion: Only transcode after qBittorrent confirms torrent is
#   complete and seeding goals are met (configure in Tdarr flow conditions)

# Default output codec (use in Tdarr flows)
TDARR_OUTPUT_CODEC="hevc"

# Default output container (use in Tdarr flows)
TDARR_OUTPUT_CONTAINER="m4v"

# -----------------------------------------------------------------------------
# Horizontal Scaling (Multiple Nodes)
# -----------------------------------------------------------------------------
# For better transcode performance, use the helper scripts to add nodes with
# auto-generated unique names, or use docker-compose directly.
#
# Recommended (auto-generated unique names):
#   ./scripts/utilities/start_tdarr_node.sh
#   ./scripts/utilities/start_tdarr_node.sh --cpu-workers 4 --mem-limit 4g
#   ./scripts/utilities/manage_tdarr_nodes.sh list
#   ./scripts/utilities/manage_tdarr_nodes.sh stop <unique-id>
#
# Manual (requires unique project names):
#   docker compose -f docker-compose.tdarr-node.yml --project-name tdarr-node-2 up -d
#   docker compose -f docker-compose.tdarr-node.yml --project-name tdarr-node-3 up -d
#
# Optional: Set worker limits (uncomment to use)
# TDARR_GPU_WORKERS="0"      # GPU workers (requires GPU passthrough)
# TDARR_CPU_WORKERS="2"      # CPU workers per node

# =============================================================================
# JELLYSEERR
# =============================================================================
# All configuration done via web UI - no additional environment variables needed

# =============================================================================
# RESOURCE LIMIT OVERRIDES (OPTIONAL)
# =============================================================================

# Leave defaults for the recommended budgets or override to match your host.
GLUETUN_MEM_LIMIT="256m"
GLUETUN_CPUS="0.5"
QBITTORRENT_MEM_LIMIT="2g"
QBITTORRENT_CPUS="2.0"
FORWARDARR_MEM_LIMIT="64m"
FORWARDARR_CPUS="0.1"
PROWLARR_MEM_LIMIT="512m"
PROWLARR_CPUS="1.0"
SONARR_MEM_LIMIT="1g"
SONARR_CPUS="1.0"
RADARR_MEM_LIMIT="1g"
RADARR_CPUS="1.0"
BAZARR_MEM_LIMIT="512m"
BAZARR_CPUS="0.5"
TOR_PROXY_MEM_LIMIT="128m"
TOR_PROXY_CPUS="0.25"
QBITTORRENT_EXPORTER_MEM_LIMIT="128m"
QBITTORRENT_EXPORTER_CPUS="0.25"
SCRAPARR_MEM_LIMIT="256m"
SCRAPARR_CPUS="0.5"

# -----------------------------------------------------------------------------
# AUTOHEAL CONFIGURATION
# -----------------------------------------------------------------------------
# Prevent endless restart loops during cascading failures
# AUTOHEAL_DEFAULT_STOP: Stop monitoring after max retries instead of continuing (default: false)
# AUTOHEAL_MAX_RETRIES: Maximum restart attempts before stopping monitoring (default: 3)
AUTOHEAL_DEFAULT_STOP="false"
AUTOHEAL_MAX_RETRIES="3"

AUTOHEAL_MEM_LIMIT="64m"
AUTOHEAL_CPUS="0.1"
UNPACKARR_MEM_LIMIT="512m"
UNPACKARR_CPUS="0.5"
TDARR_SERVER_MEM_LIMIT="1g"
TDARR_SERVER_CPUS="1.0"
TDARR_NODE_MEM_LIMIT="2g"
TDARR_NODE_CPUS="2.0"
JELLYSEERR_MEM_LIMIT="512m"
JELLYSEERR_CPUS="1.0"

# =============================================================================
# EXAMPLE PRESETS (UNCOMMENT TO APPLY)
# =============================================================================

# --- Apple Mac mini (M2 / 8 GB RAM) ---
# (smaller services such as gluetarr/monitoring exporters can keep defaults)
#GLUETUN_MEM_LIMIT="384m"
#GLUETUN_CPUS="0.5"
#QBITTORRENT_MEM_LIMIT="2.5g"
#QBITTORRENT_CPUS="2.5"
#FORWARDARR_MEM_LIMIT="64m"
#FORWARDARR_CPUS="0.1"
#SONARR_MEM_LIMIT="1.2g"
#SONARR_CPUS="1.2"
#RADARR_MEM_LIMIT="1.2g"
#RADARR_CPUS="1.2"
#BAZARR_MEM_LIMIT="640m"
#BAZARR_CPUS="0.6"
#PROWLARR_MEM_LIMIT="640m"
#PROWLARR_CPUS="1.0"
#TOR_PROXY_MEM_LIMIT="160m"
#TOR_PROXY_CPUS="0.3"
#QBITTORRENT_EXPORTER_MEM_LIMIT="192m"
#QBITTORRENT_EXPORTER_CPUS="0.4"
#SCRAPARR_MEM_LIMIT="256m"
#SCRAPARR_CPUS="0.5"
#AUTOHEAL_MEM_LIMIT="64m"
#AUTOHEAL_CPUS="0.1"
#UNPACKARR_MEM_LIMIT="512m"
#UNPACKARR_CPUS="0.5"

# --- Raspberry Pi 5 (16 GB RAM) ---
# (keep gluetarr and exporters at defaults unless you see pressure)
#GLUETUN_MEM_LIMIT="192m"
#GLUETUN_CPUS="0.35"
#QBITTORRENT_MEM_LIMIT="2.25g"
#QBITTORRENT_CPUS="1.8"
#FORWARDARR_MEM_LIMIT="64m"
#FORWARDARR_CPUS="0.1"
#SONARR_MEM_LIMIT="1g"
#SONARR_CPUS="1.0"
#RADARR_MEM_LIMIT="1g"
#RADARR_CPUS="1.0"
#BAZARR_MEM_LIMIT="512m"
#BAZARR_CPUS="0.45"
#PROWLARR_MEM_LIMIT="512m"
#PROWLARR_CPUS="0.75"
#TOR_PROXY_MEM_LIMIT="128m"
#TOR_PROXY_CPUS="0.2"
#QBITTORRENT_EXPORTER_MEM_LIMIT="128m"
#QBITTORRENT_EXPORTER_CPUS="0.25"
#SCRAPARR_MEM_LIMIT="192m"
#SCRAPARR_CPUS="0.4"
#AUTOHEAL_MEM_LIMIT="64m"
#AUTOHEAL_CPUS="0.1"
#UNPACKERR_MEM_LIMIT="512m"
#UNPACKERR_CPUS="0.5"

# --- MacBook Pro (M1 Pro / 16 GB RAM) ---
#GLUETUN_MEM_LIMIT="384m"
#GLUETUN_CPUS="0.75"
#QBITTORRENT_MEM_LIMIT="3.5g"
#QBITTORRENT_CPUS="3.5"
#FORWARDARR_MEM_LIMIT="64m"
#FORWARDARR_CPUS="0.1"
#SONARR_MEM_LIMIT="1.5g"
#SONARR_CPUS="1.5"
#RADARR_MEM_LIMIT="1.5g"
#RADARR_CPUS="1.5"
#BAZARR_MEM_LIMIT="768m"
#BAZARR_CPUS="0.75"
#PROWLARR_MEM_LIMIT="768m"
#PROWLARR_CPUS="1.25"
#TOR_PROXY_MEM_LIMIT="192m"
#TOR_PROXY_CPUS="0.4"
#QBITTORRENT_EXPORTER_MEM_LIMIT="256m"
#QBITTORRENT_EXPORTER_CPUS="0.5"
#SCRAPARR_MEM_LIMIT="320m"
#SCRAPARR_CPUS="0.6"
#AUTOHEAL_MEM_LIMIT="64m"
#AUTOHEAL_CPUS="0.1"
#UNPACKERR_MEM_LIMIT="512m"
#UNPACKERR_CPUS="0.5"

# --- Windows 11 Workstation (per https://pcpartpicker.com/user/eric536c75747a/saved/#view=kGRK23) ---
# (ample capacity—feel free to raise limits further if desired)
#GLUETUN_MEM_LIMIT="512m"
#GLUETUN_CPUS="1.0"
#QBITTORRENT_MEM_LIMIT="4g"
#QBITTORRENT_CPUS="4.0"
#FORWARDARR_MEM_LIMIT="64m"
#FORWARDARR_CPUS="0.1"
#SONARR_MEM_LIMIT="2g"
#SONARR_CPUS="2.0"
#RADARR_MEM_LIMIT="2g"
#RADARR_CPUS="2.0"
#BAZARR_MEM_LIMIT="1g"
#BAZARR_CPUS="1.0"
#PROWLARR_MEM_LIMIT="1g"
#PROWLARR_CPUS="1.5"
#TOR_PROXY_MEM_LIMIT="256m"
#TOR_PROXY_CPUS="0.5"
#QBITTORRENT_EXPORTER_MEM_LIMIT="256m"
#QBITTORRENT_EXPORTER_CPUS="0.5"
#SCRAPARR_MEM_LIMIT="384m"
#SCRAPARR_CPUS="0.75"
#AUTOHEAL_MEM_LIMIT="64m"
#AUTOHEAL_CPUS="0.1"
#UNPACKERR_MEM_LIMIT="512m"
#UNPACKERR_CPUS="0.5"

# =============================================================================
# MONITORING PROFILE
# =============================================================================

# When set to true, ./scripts/setup/bootstrap.py will automatically (re)start the
# monitoring exporters using the docker compose "monitoring" profile after it
# saves API keys into .env.
ENABLE_MONITORING_PROFILE="false"
