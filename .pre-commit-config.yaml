repos:
  # Shell linting (cross-platform via packaged shellcheck)
  - repo: https://github.com/shellcheck-py/shellcheck-py
    rev: v0.10.0.1
    hooks:
      - id: shellcheck
        files: ^scripts/.*\.sh$

  # Local hooks so we can tightly control file filters (staged code changes only)
  - repo: local
    hooks:
      - id: flake8
        name: flake8 (staged python)
        language: python
        additional_dependencies:
          - flake8==7.1.0
        entry: flake8
        types: [python]
        files: ^(scripts/|tests/)
        args:
          - --max-line-length=100
          - "--extend-ignore=E203,W503"

      - id: pylint
        name: pylint (scripts/setup)
        language: python
        additional_dependencies:
          - pylint==3.2.0
        entry: pylint
        types: [python]
        files: ^scripts/setup/.*\.py$
        args: [--fail-under=8.0]

      - id: pytest
        name: pytest (unit tests)
        language: python
        additional_dependencies:
          - requests==2.31.0
          - pytest==8.2.0
          - pytest-cov==5.0.0
          - responses==0.25.0
        entry: pytest
        pass_filenames: false
        files: ^(scripts/|tests/).*\.py$
        args: [tests/]
